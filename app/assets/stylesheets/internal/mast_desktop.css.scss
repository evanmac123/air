/* -- Top bar / header -- */
header nav {display: block;}
header nav .row {position: relative;}
header {
  .row {
    position: relative;
    #user_info .user_info_sections, #me_toggle {
      padding-top:.35em;
      padding-bottom:.35em;
    }
  }

  // Logo
  #logo a {
    height: 2.875rem;
    margin:0;
    position: relative;
    width:100%;
    max-width:10em;
    img {
      margin: auto auto auto 0;
      max-height: 100%;
      position: absolute;  
      bottom: 0; left: 0; top: 0; right: 0;
    }
    &:hover {
      img{
        opacity:.15;
      }
      &:after {
        background:image-url('v5/bg_dark.png');
        border-radius:$border-radius;
        color:$white;
        content: "Home";
        display: block;
        font-size:1em;
        padding:.5em 1em;
        position: absolute;
        text-align: center;
        text-transform: capitalize;
        margin:-1em auto 0 1em;
        top:50%;
        bottom:50%;
        left:0;
        right:0;
        width:5em;
        height:2em;
      }
    }
  }

  // Navigation menus
  #small-toggle.off-canvas-toggle {display: none;}
  #navigation {
    display: inline-block;
    font-size:.875em;
    position: static;
    #desktop-toggle.off-canvas-toggle {
      display: inline-block;
      a {margin:0;}
    }
  }

  #user_info #me_toggle, #manage_board, #admin_toggle, .how_it_works {
    border: {
      style:solid;
      color:darken($header-color, 9%);
      top: {width:0;}
      bottom: {width:0;}
      left: {width:1px;}
      right: {width:1px;}
    }
    box-shadow: inset 0px 1px 1px 1px #fff;
    cursor: pointer;
    display: inline-block;
    &:hover {
      background:image-url('v5/bg_light.png');
      &:after{color:$gray;}
    }
    &:active {background: $white;}
  } 

  // Toggles 
  
  #user_info #me_toggle {
    padding-left:.5em;
    position: relative;
    text-align: left;
    width:4.5em;
    &:after {
      display: inline-block;
      color:$med-gray;
      content:"\25BE";
      font-size:1.25em;
      position: absolute;
      right:.35em;
      top:50%;
      margin-top:-.55em;
    }
    &.toggled {
      &:after{color:$gray;}
    }
    img {max-width:$top-bar-height;}
    .shadow_overlay {
      width:35px;
      height:35px;
      top:.35em;
      left:.5em;
    }
  }
  #user_info #me_toggle, #admin_toggle, .how_it_works {
    @include ease(0);
    &.toggled {
      background:$dark-gray;
      box-shadow:none;
    }
  } 

  // User info
  #user_info {
    margin:0; 
    overflow: hidden;
    padding-left:0;
    text-align: right;
    #to_next_credit {width:33%; max-width:11em;}
    #total_tiles {padding-right:5%;}
  }

  // Toggled menu
  .user_options ul, .admin_options .client_admin_pages, .how_it_works ul {
    $toggled-menu-bg: $dark-gray;
    background:$toggled-menu-bg;
    border:1px $toggled-menu-bg solid;
    display: none;
    position: absolute;
    top:3.35em;
    z-index:1;
    a {
      color:$light-gray;
      display: block;
      @include font-semibold;
      padding:.65em 2.5em;
      width:12em;
      &:hover {
        background: lighten($toggled-menu-bg, 5%);
        color:$white;
      }
      &:active {background: lighten($toggled-menu-bg, 13%);}
    }
    li + li {a{border-top:1px lighten($toggled-menu-bg, 5%) solid;}}
  }
  .user_options ul {
    right:17px;
    .nav-home, .nav-help {display: none;}
  }

  // Admin tools menu
  .admin_options {
    &:after{@include clear;}
    p.small_cap {display: none;}
    #manage_board, #admin_toggle {
      @include font-bold;
      float: left;
      height:100%;
      max-height:$header-total-height;
      position: relative;
    }
    #manage_board {
      color:$text-color;
      padding:1.125em 1em;
      &:hover {&:before {
        background:darken($gray, 5%);
      }}
      &:before {
        background:$gray;
        border:3px $white solid;
        border-radius:1.25em;
        content:"";
        display: inline-block;
        margin-right:.5em;
        vertical-align: text-bottom;
        width:1.25em;
        height:1.25em;
      }
    }
    #admin_toggle {
      @include ease(0);
      color:$med-gray;
      font-size:1.5em;
      padding:.75em 1em;
      border-left:0;
    }
    .client_admin_pages {margin-left:-.45em;}
  }
}
