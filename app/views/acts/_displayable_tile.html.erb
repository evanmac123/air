<% tile = displayable_tile %>
<% classes = tile.display_completion_on_this_request ? "suggested-tile recently-completed" : "suggested-tile" %>
<% classes += " overflow-tiles " if displayable_tile_counter >= @num_suggestions_to_display %>
<div class="<%= classes %> gradient freeplay" id="suggested-tile-<%= tile.id %>">
  <div class="dose-texts">
    	<p class="dose-title"><%= raw tile.name %></p>
    	<p class="dose-descript"><%= raw tile.short_description %></p>
  </div>
  <% more_info_link_id = "more-info-#{tile.id}" %>
  <% long_description_div_id = "long-description-#{tile.id}" %>
  
  <%= link_to 'More info', '#', :id => more_info_link_id, :class => 'more-info' %>
  
  <% if tile.bonus_points > 0 %>
    <div class='dd_bonus'>+<%= tile.bonus_points %> bonus</div>
  <% end %>
  
  <% content_for :javascript do %>
    <%= javascript_tag do %>
        $('#<%= more_info_link_id %>').click(function(e) {
        e.preventDefault();
        $('#<%= long_description_div_id %>').toggle();
        info_toggle_link = $('#<%= more_info_link_id%>');
        alternate_text = info_toggle_link.text() == 'More info' ? 'Less info' : 'More info';
        info_toggle_link.text(alternate_text);
      });
    <% end %>
  <% end %>
  <div class="cf"></div>
  <div class="gradient dose-moreinfo" id="<%= long_description_div_id %>" style="display: none"><%= raw tile.long_description %></div>
</div>
