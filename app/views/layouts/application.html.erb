<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html>
<head>
  <title>Airbo</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <%= content_for :meta %>
  <%= csrf_meta_tag %>

  <%= split_stylesheet_link_tag "app-internal", :media => "all", :split_count => 5 %>

  <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <style type="text/css">.gradient {filter: none;}</style>
    <%= stylesheet_link_tag 'ie8-grid12-foundation-4.css' %>
    <%= stylesheet_link_tag 'internal/internal_ie8' %>
  <![endif]-->

  <%= javascript_include_tag 'app-internal' %>
  <%= javascript_include_tag 'file-uploader' unless browser.ie8? %>
  <%= javascript_include_tag 'for-modern-browsers' unless browser.ie8? %>
  <%= javascript_include_tag asset_path('ga.js') if ENV['USE_GA'] %>
  <%= render 'shared/mixpanel' %>
  <%= mobvious_javascript %>
  <%= render 'shared/nerf_animations_in_test' %>
  <%= render "shared/custom_palette"  if @palette && @palette.enabled?%>
  <%=content_for :head%>
</head>
<body class="<%= body_class %>" data-current-user="<%= current_user.data_for_mixpanel.to_json %>" data-intercom-user="<%= current_user.intercom_data.to_json %>" style="-webkit-overflow-scrolling: touch; overflow:visible;"><%# only works with inline style? WTF. but leave it: this fixes scroll problems in ios7 and doesn't seem to work if included via stylesheet. %>

  <%= render 'shared/header', :show_play_box => true %>
  <div id='js-flashes'><%= render 'shared/flashes' %> </div>
  <%= render 'shared/offcanvas_menu_signedin' %>


  <main class="main">
    <%= render partial: 'shared/tiles_tools_subnav/tiles_tools_subnav' %>
    <div class="core">
      <div class="content">

               <%= yield %>
      </div>
      <div id="footer">
        <%= render 'shared/copyright' %>
      </div>
    </div>
  </main>

  <div class="modals">
  </div>

  <%= render :partial => 'shared/javascript' %><!-- This is where 'yield :javascript' takes place -->

  <div id='gradient-triangle'></div>
  <%= javascript_include_tag 'rem.min.js' %>
</body>
</html>
