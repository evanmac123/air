
<div class="row">
  <div class="columns large-8 large-centered">
    <ul class="tile_preview_menu form_menu" >
      <li class="preview_menu_item">
        <a href="#" class = "submit_tile_form">
          <i class="fa fa-save fa-1x"></i>
          <span class="header_text">
            Save Tile
          </span>
        </a>
      </li>
    </ul>
  </div>
</div>
<div class="row">
  <div class="columns large-8 large-centered">
    <% form_url = @user_side ? suggested_tiles_path : url_for([:client_admin, @tile]) %>
    <%= form_for @tile,  as: :tile, url: form_url, html: { id: "new_tile_builder_form", class: "new_tile_builder_form",  data:{suggested: !!@user_side,  tileid: @tile.id}} do |f| %>
      <%= f.hidden_field :status %>
      <%= f.hidden_field :remote_media_type,  id: "remote_media_type" %>
      <%= f.hidden_field :media_source, id: "media_source"%>
      <%= hidden_field_tag :pseudo_tile_id %>
      <%= hidden_field_tag "tile[attachments][]", "DELETE" %>


      <div class="tile_holder_container">

        <div class="tile_form_holder">
          <div class="tile_holder">
            <%= render '/shared/tiles/form/image_preview', form: f %>
            <div class="builder_content tile_builder_section">
              <%= render 'shared/tiles/form/headline_and_supporting_content_fields', form: f, tile: @tile %>
            </div>
            <div class="attachments">
              <%= render partial: "/client_admin/tiles/tile_attachments", locals: {tile: @tile}%>
              <div class="add-attachment-wrapper">
                <a class=" js-file-upload-trigger " data-target="#file-uploader" >
                  <%=fa_icon "plus", class: "icon-add-attachment"%> 
                  <span class="add-attachment">Add Attachment</span>
                </a>
              </div>
            </div>
            <%= render 'shared/tiles/form/question_and_answer_section', form: f %>
          </div>
        </div>
      </div>
      <% unless @user_side %>
        <div class="tile-builder-share-to-explore text-center">
          <p class="share-to-explore-cta"><%= f.check_box :is_public, style: "margin-right: 7px;" %>Share to Airbo Explore when this Tile is posted?</p>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

<form class="search-form" id="flickr" action="https://api.flickr.com/services/rest" method="get" data-provider="flickr" data-search-field='text'>
  <input type="hidden" name="method" value="flickr.photos.search">
  <input type="hidden" name="text">
  <input type="hidden" name="sort" value="relevance">
  <input type="hidden" name="license" value="<%=ENV['FLICKR_LICENSES']%>">
  <input type="hidden" name="format"  value="json">
  <input type="hidden" name="per_page"  value="480">
  <input type="hidden" name="extras"  value="license">
  <input type="hidden" name="nojsoncallback"  value="1">
  <input type="hidden" name="is_gallery"  value="1">
  <input type="hidden" name="api_key" value="<%=ENV['FLICKR_KEY']%>">
</form>

<form class="search-form" id="pixabay" action="https://pixabay.com/api" method="get" data-provider="pixabay" data-search-field='q'>
  <input type="hidden" name="q" placeholder="Search Pixabay" >
  <input type="hidden" name="key" value="<%=ENV['PIXABAY_KEY']%>">
  <input type="hidden" name="safesearch" value="true">
  <input type="hidden" name="per_page" value="200">
  <input type="hidden" name="image_type" value="photo">

</form>

<form class="search-form" id="google" action="https://www.googleapis.com/customsearch/v1" method="get" data-provider="google" data-search-field='q'>
  <input type="hidden" name="q" placeholder="Search Google">
  <input type="hidden" name="cx" value="<%=ENV['GOOGLE_IMAGE_CX']%>">
  <input type="hidden" name="searchType" value="image">
  <input type="hidden" name="key" value="<%=ENV['GOOGLE_IMAGE_KEY']%>">
  <input type="hidden" name="start" value="1">
</form>

<%= s3_uploader_form  id: "image-uploader", class: "s3-uploader", data:{uploadType: 'tileImage'} do %>
  <%= file_field_tag :file, id:"media_file" %>
<% end %>



<%= s3_uploader_form  id: "file-uploader", class: "s3-uploader", bucket: APP_BUCKET, data:{path: @tile.tile_attachments_path, uploadType: 'tileAttachment'} do %>
  <%= file_field_tag "file", id:"tileAttachment" , multiple: true%>
<% end %>


