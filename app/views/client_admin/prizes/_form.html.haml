= form_for raffle, url: save_draft_client_admin_prizes_path, method: :post do |f|
  .content_section
    = f.label :starts_at, "Duration", class: "small_cap"
    .duration
      .date_input
        = f.text_field :starts_at, value: date_in_pick_format(raffle.starts_at), class: "datepicker", placeholder: "Start", size: 10
      .to_label
        = f.label :ends_at, "to", class: "small_cap"
      .date_input
        = f.text_field :ends_at, value: date_in_pick_format(raffle.ends_at), class: "datepicker", placeholder: "End", size: 10
    .outer_tip
      Starts at 12:00 AM ET of start date. Ends at 11:59 PM ET of end date.
  .content_section
    = f.label "prizes_", "Prize", class: "small_cap"
    .add_another
      %i.fa.fa-plus
      Add Another
    #prizes
      - raffle.prizes.each do |prize|
        .prize_section
          = text_area_tag "raffle[prizes][]", prize, placeholder: "Enter a prize description (e.g., Grand Prize: Gift Card)", class: "prize_field", maxlength: 160
          .remove_prize
            Remove
  .content_section
    = f.label :other_info, class: "small_cap"
    = f.text_area :other_info, maxlength: 300, placeholder: "For every 20 points you earn, you receive an entry into the prize raffle. Weâ€™ll email the winner to award the prize within a week of the end of the prize period."



:javascript
  _.each($('.prize_field'), addCharacterCounterFor);
  addCharacterCounterFor( $('#raffle_other_info') );

  $(function() {
    $(".datepicker").datepicker({ minDate: '0'});
    rebindPrizeEvents();
  });

  $('.add_another').click(function() {
    if(!window.status || window.status == 'live_edit'){
      addNewPrizeField();
      addNewPreviewPrizeField();
      rebindPrizeEvents();
    }
  });

  //for picking by datepicker
  $("#raffle_starts_at").change( function(){
    validateStartDate();
  });

  $("#raffle_ends_at").change( function(){
    validateEndDate();
  });

  //for printing or pasting
  $("#raffle_starts_at").bind('input propertychange', function(){
    validateStartDate();
  });
  $("#raffle_ends_at").bind('input propertychange', function(){
    validateEndDate();
  });

  function rebindPrizeEvents(){
    $(".prize_field").unbind();
    $(".prize_field").bind('input propertychange', function(){
      index = $(".prize_field").index($(this));
      updatePrivewPrizeField(index);
    });

    $(".remove_prize").unbind();  
    $(".remove_prize").click(function(){
      if(!window.status || window.status == 'live_edit'){
        index = $(".prize_section").index( $(this).closest( $(".prize_section") ) );
        removePrize(index);
      }
    });
  };

  $("#raffle_other_info").bind('input propertychange', function(){
    updatePreivewOtherInfo();
  });
