- highlighted = single_tooltip[0]
- bubbly_contents = single_tooltip[1]
- bubbly_div_id_without_prefix = highlighted[1..-1] + "_bubbly"
- bubbly_div_id = "#" + bubbly_div_id_without_prefix
- position = 'top center'
- direction = 'up'
- @x = 0
- @y = 0
- if single_tooltip[2].present?
  - if single_tooltip[2] == 'bottom'
    - position = 'bottom center'
    - direction = 'down'



  
%div{:id => bubbly_div_id_without_prefix, :class => "bubbly"}
  
  - if direction == 'up'
    - @y = -1
    .bubbly-top-flat
    .bubbly-middle
      = bubbly_contents
    .bubbly-bottom-arrow
  - else
    - @y = 1
    .bubbly-top-arrow
    .bubbly-middle
      = bubbly_contents
    .bubbly-bottom-flat

    
= content_for :javascript do
  :javascript
    $(function() {
      $('#{highlighted}').tooltip(
        {
          tip : '#{bubbly_div_id}',
          //effect : 'slide',
          //slideInSpeed : 800,
          //slideOutSpeed : 500,
          predelay : #{@tooltip_delay},
          delay : 0, 
          position : '#{position}', 
          direction : '#{direction}',
          offset : [#{@y}, #{@x}]
        });
    });